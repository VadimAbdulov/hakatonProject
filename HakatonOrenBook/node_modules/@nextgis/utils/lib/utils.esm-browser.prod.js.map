{"version":3,"file":"utils.esm-browser.prod.js","sources":["../src/applyMixins.ts","../src/array/arrayChunk.ts","../src/array/arrayCompare.ts","../src/array/arrayUnique.ts","../src/Clipboard.ts","../src/debounce.ts","../src/debug/debugLog.ts","../src/deepmerge.ts","../src/defined.ts","../src/deprecated/deprecatedMapClick.ts","../src/deprecated/deprecatedWarn.ts","../src/events.ts","../src/flatten.ts","../src/geom/checkExtent.ts","../src/geom/constants.ts","../src/geom/coordTransform.ts","../src/geom/eachCoordinates.ts","../src/geom/geom.ts","../src/geom/getBoundsPolygon.ts","../src/geom/getCirclePolygon.ts","../src/geom/getIdentifyRadius.ts","../src/geom/getSquarePolygon.ts","../src/geom/isLngLatBoundsArray.ts","../src/number/round.ts","../src/object/objectAssign.ts","../src/object/objectDeepEqual.ts","../src/object/objectRemoveEmpty.ts","../src/platform.ts","../src/re/reEscape.ts","../src/sleep.ts","../src/string/camelize.ts","../src/string/capitalize.ts","../src/string/numberWithSpaces.ts","../src/typeHelpers/isObjKey.ts","../src/typeHelpers/Json.ts","../src/typeHelpers/index.ts","../src/unflatten.ts","../src/url.ts"],"sourcesContent":["export interface ApplyMixinOptions {\n  replace?: boolean;\n}\n\ntype Ctor = any;\n\nexport function applyMixins(\n  derivedCtor: Ctor,\n  baseCtors: Ctor[],\n  opt: ApplyMixinOptions = {},\n): void {\n  const derivedProperties = allProperties(derivedCtor.prototype);\n  const replace = opt.replace !== undefined ? opt.replace : true;\n  baseCtors.forEach((baseCtor) => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n      const isSomeProp = derivedProperties.indexOf(name) !== -1;\n      if ((!replace && !isSomeProp) || replace) {\n        const descriptor = Object.getOwnPropertyDescriptor(\n          baseCtor.prototype,\n          name,\n        );\n        if (descriptor) {\n          Object.defineProperty(derivedCtor.prototype, name, descriptor);\n        }\n      }\n    });\n  });\n}\n\nexport function allProperties(obj: Record<string, unknown>): string[] {\n  return _allProperties(obj);\n}\n\nfunction _allProperties(\n  obj: Record<string, unknown>,\n  _props: string[] = [],\n): string[] {\n  for (; obj !== null; obj = Object.getPrototypeOf(obj)) {\n    const op = Object.getOwnPropertyNames(obj);\n    for (let i = 0; i < op.length; i++) {\n      if (_props.indexOf(op[i]) == -1) {\n        _props.push(op[i]);\n      }\n    }\n  }\n  return _props;\n}\n\nexport function mixinProperties(\n  derivedCtor: Ctor,\n  baseCtor: Ctor,\n  properties: string[],\n): void {\n  properties.forEach((name) => {\n    const descriptor = Object.getOwnPropertyDescriptor(\n      baseCtor.prototype,\n      name,\n    );\n    if (descriptor) {\n      Object.defineProperty(derivedCtor.prototype, name, descriptor);\n    }\n  });\n}\n","export function arrayChunk<T>(arr: T[], size: number): T[][] {\n  return Array.from({ length: Math.ceil(arr.length / size) }, (v, i) =>\n    arr.slice(i * size, i * size + size),\n  );\n}\n","/**\n * Comparison of the contents of two arrays. Position of elements is ignored.\n * @example\n * ```javascript\n * arrayCompare(['a', 'b'], ['b', 'a']) // true\n * arrayCompare(['a', 'b'], ['b']) // false\n * arrayCompare('asdf1234', '1234asdf') // true\n * ```\n */\nexport function arrayCompare(array1: any[], array2: any[]): boolean {\n  array1 = Array.from(array1).sort();\n  array2 = Array.from(array2).sort();\n  return _arrayCompare(array1, array2);\n}\n\n/**\n * Comparing content and position of elements of two arrays.\n * @example\n * ```javascript\n * arrayCompareStrict(['a', 'b'], ['a', 'b']) // true\n * arrayCompareStrict(['a', 'b'], ['b', 'a']) // false\n * arrayCompareStrict('asdf1234', 'asdf1234') // true\n * arrayCompareStrict('asdf1234', '1234asdf') // false\n * ```\n */\nexport function arrayCompareStrict(array1: any[], array2: any[]): boolean {\n  array1 = Array.from(array1);\n  array2 = Array.from(array2);\n  return _arrayCompare(array1, array2);\n}\n\nfunction _arrayCompare(array1: any[], array2: any[]): boolean {\n  return (\n    array1.length === array2.length &&\n    array1.every(function (value, index) {\n      return value === array2[index];\n    })\n  );\n}\n","export function arrayUnique<T = any>(arr: T[]): T[] {\n  return arr.filter((elem, pos, arr) => {\n    return arr.indexOf(elem) == pos;\n  });\n}\n","export class Clipboard {\n  silent = true;\n\n  constructor(text?: string) {\n    if (text) {\n      this.copy(text);\n    }\n  }\n\n  static copy(text: string): boolean {\n    const clipboard = new Clipboard();\n    return clipboard.copy(text);\n  }\n\n  copy(text: string): boolean {\n    try {\n      if ((navigator as any).clipboard) {\n        (navigator as any).clipboard.writeText(text);\n      } else if ((window as any).clipboardData) {\n        (window as any).clipboardData.setData('text', text);\n      } else {\n        this.copyToClipboard(text);\n      }\n      if (!this.silent) console.log('Copied to Clipboard');\n      return true;\n    } catch {\n      if (!this.silent) console.log('Please copy manually');\n    }\n    return false;\n  }\n\n  private copyToClipboard(text: string) {\n    const input = document.createElement('input') as HTMLInputElement;\n    input.value = text;\n    try {\n      document.body.appendChild(input);\n      this.copyNodeContentsToClipboard(input);\n    } finally {\n      document.body.removeChild(input);\n    }\n  }\n\n  private copyNodeContentsToClipboard(input: HTMLInputElement) {\n    input.select();\n    input.setSelectionRange(0, 99999); /*For mobile devices*/\n    document.execCommand('copy');\n  }\n}\n","// based on https://github.com/bvaughn/debounce-decorator\n\nexport function debounce<T extends (...args: any[]) => void>(\n  cb: T,\n  wait = 10,\n): T & { clear: () => void } {\n  let timeoutId: any;\n\n  function wrapper(this: any, ...args: any[]) {\n    wrapper.clear();\n\n    timeoutId = setTimeout(() => {\n      timeoutId = null;\n      cb.apply(this, args);\n    }, wait);\n  }\n\n  wrapper.clear = function () {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n  };\n\n  return wrapper as T & { clear: () => void };\n}\n\nexport function DebounceDecorator(wait = 10) {\n  return function (\n    _target: unknown,\n    key: string,\n    descriptor: PropertyDescriptor,\n  ): PropertyDescriptor {\n    return {\n      configurable: true,\n      enumerable: descriptor.enumerable,\n      get: function getter() {\n        // Attach this function to the instance (not the class)\n        Object.defineProperty(this, key, {\n          configurable: true,\n          enumerable: descriptor.enumerable,\n          value: debounce(descriptor.value, wait),\n        });\n\n        return this[key as keyof PropertyDescriptor];\n      },\n    };\n  };\n}\n","export function debugLog(message?: string): boolean {\n  if (__DEV__) {\n    console.trace('DEBUG: ' + message);\n    return true;\n  }\n  return false;\n}\n","export function deepmerge<T>(\n  x: Partial<T>,\n  y: Partial<T>,\n  mergeArray?: boolean,\n): T;\nexport function deepmerge<T1, T2>(\n  target: Partial<T1>,\n  src: Partial<T2>,\n  mergeArray = false,\n): T1 & T2 {\n  let target_ = target as any;\n  const src_ = src as any;\n  const array = Array.isArray(src_);\n  let dst: any = (array && []) || {};\n\n  if (array && Array.isArray(src_)) {\n    if (mergeArray) {\n      target_ = target_ || [];\n      dst = dst.concat(target_);\n      src_.forEach((e: any, i: number) => {\n        if (typeof dst[i] === 'undefined') {\n          dst[i] = e;\n        } else if (typeof e === 'object') {\n          dst[i] = deepmerge(target_[i], e, mergeArray);\n        } else {\n          if (target_.indexOf(e) === -1) {\n            dst.push(e);\n          }\n        }\n      });\n    } else {\n      // Replace array. Do not merge by default\n      dst = src_;\n    }\n  } else {\n    if (target_ && typeof target_ === 'object') {\n      Object.keys(target_).forEach(function (key) {\n        dst[key] = target_[key];\n      });\n    }\n    Object.keys(src_).forEach(function (key) {\n      if (typeof src_[key] !== 'object' || !src_[key]) {\n        dst[key] = src_[key];\n      } else {\n        if (typeof target_[key] === 'object' && typeof src_[key] === 'object') {\n          dst[key] = deepmerge(target_[key], src_[key], mergeArray);\n        } else {\n          dst[key] = src_[key];\n        }\n      }\n    });\n  }\n  return dst;\n}\n","/**\n * from https://github.com/CesiumGS/cesium/blob/master/Source/Core/defined.js\n *\n * @param val - The object.\n * @returns Returns true if the object is defined, returns false otherwise.\n *\n * @example\n * ```javascript\n * if (defined(positions)) {\n *   doSomething();\n * } else {\n *   doSomethingElse();\n * }\n * ```\n */\nexport function defined<T>(val: T): val is Exclude<T, null | undefined> {\n  return val !== undefined && val !== null;\n}\n\n/**\n * from https://github.com/CesiumGS/cesium/blob/master/Source/Core/defined.js\n *\n * @param val - The object.\n * @returns Returns true if the object is defined and not empty string, returns false otherwise.\n *\n * @example\n * ```javascript\n * full('foo') // true\n * full('') // false\n * full(undefined) // false\n * full(0) // true\n * ```\n */\nexport function full<T>(val: T): val is Exclude<T, null | undefined> {\n  return typeof val === 'string' ? !!val : defined(val);\n}\n","import { debugLog } from '../debug/debugLog';\n\nimport type { LatLng } from '../geom/interfaces';\nimport type { LngLatArray } from '../geom/interfaces';\n\ninterface DeprecatedMapClickEvent {\n  lngLat: LngLatArray;\n  latLng?: LatLng;\n}\n\n/**\n * @internal\n */\nexport function deprecatedMapClick<\n  T extends DeprecatedMapClickEvent = DeprecatedMapClickEvent,\n>(ev: T): T {\n  if (!ev.lngLat && ev.latLng) {\n    debugLog('deprecated use of latLng in MapClickEvent, use lngLat instead');\n    const lat = ev.latLng.lat;\n    const lng = ev.latLng.lng;\n    ev.lngLat = [lng, lat];\n  }\n  return ev;\n}\n","/** @internal */\nexport function deprecatedWarn(message: string): void {\n  console.warn(`DEPRECATED WARN: ${message}`);\n}\n","import type { EventEmitter } from 'events';\n\nexport class Events<E = any> {\n  private readonly _eventsStatus: { [key in keyof E]?: boolean } = {};\n\n  constructor(private emitter: EventEmitter) {}\n\n  setEventStatus(event: keyof E, status: boolean): void {\n    this._eventsStatus[event] = status;\n  }\n\n  onLoad(event: keyof E | (keyof E)[]): Promise<this> {\n    const events: (keyof E)[] = Array.isArray(event) ? event : [event];\n    const promises = events.map(\n      (x) =>\n        new Promise((res) => {\n          if (this.getEventStatus(x)) {\n            res(this);\n          } else {\n            const e = x as string | symbol;\n            this.emitter.once(e, () => {\n              this.setEventStatus(x, true);\n              res(this);\n            });\n          }\n        }),\n    );\n    return Promise.all(promises).then(() => this);\n  }\n\n  getEventStatus(event: keyof E): boolean {\n    // ugly hack to disable type checking error\n    const _eventName = event as keyof E;\n    const status = this._eventsStatus[_eventName];\n    return status !== undefined ? !!status : false;\n  }\n}\n","export interface FlattenOptions {\n  flatArray?: boolean;\n}\n\nexport function flatten(\n  data: Record<string, any>,\n  opt: FlattenOptions = {},\n): Record<string, any> {\n  const flatArray = opt.flatArray ?? true;\n  const result: Record<string, any> = {};\n  function recurse(cur: Record<string, any>, prop: any) {\n    if (Object(cur) !== cur) {\n      result[prop] = cur;\n    } else if (Array.isArray(cur) && flatArray) {\n      const l = cur.length;\n      for (let i = 0; i < l; i++) {\n        recurse(cur[i], prop + '[' + i + ']');\n      }\n      if (l === 0) result[prop] = [];\n    } else {\n      let isEmpty = true;\n      for (const p in cur) {\n        isEmpty = false;\n        recurse(cur[p], prop ? prop + '.' + p : p);\n      }\n      if (isEmpty && prop) result[prop] = {};\n    }\n  }\n  recurse(data, '');\n  return result;\n}\n","import type { LngLatBoundsArray } from './interfaces';\n\nexport function checkExtent(extent: number[]): extent is LngLatBoundsArray {\n  const [minLon, minLat, maxLon, maxLat] = extent;\n\n  // Check if coordinates are in the correct order\n  const isOrderValid = minLon < maxLon && minLat < maxLat;\n\n  if (!isOrderValid) {\n    console.log('Error: The extent coordinates are not in the correct order.');\n    console.log(\n      `Received extent: [${minLon}, ${minLat}, ${maxLon}, ${maxLat}]`,\n    );\n\n    // Create a valid array with corrected order\n    const correctedExtent = [\n      Math.min(minLon, maxLon),\n      Math.min(minLat, maxLat),\n      Math.max(minLon, maxLon),\n      Math.max(maxLat, minLat),\n    ];\n\n    console.log(`Expected order: [${correctedExtent.join(', ')}]`);\n  }\n\n  // Check if the coordinates are within valid ranges\n  const isValidLon = minLon >= -180 && maxLon <= 180;\n  const isValidLat = minLat >= -90 && maxLat <= 90;\n\n  if (!isValidLon || !isValidLat) {\n    console.log(\n      'Warning: The coordinates may not be within valid geographic ranges.',\n    );\n  }\n\n  // Return true only if all checks pass\n  return isOrderValid && isValidLon && isValidLat;\n}\n","/**\n * Radius of the earth in kilometers\n */\nexport const EARTHS_RADIUS = 6371;\n","import type { LngLatArray } from './interfaces';\n\nexport function degrees2meters(lng: number, lat: number): [number, number] {\n  lat = lat > 85.06 ? 85.06 : lat < -85.06 ? -85.06 : lat;\n\n  const x = (lng * 20037508.34) / 180;\n  let y = Math.log(Math.tan(((90 + lat) * Math.PI) / 360)) / (Math.PI / 180);\n  y = (y * 20037508.34) / 180;\n  return [x, y];\n}\n\nexport function meters2degrees(x: number, y: number): LngLatArray {\n  const lon = (x * 180) / 20037508.34;\n  const lat =\n    (Math.atan(Math.exp((y * Math.PI) / 20037508.34)) * 360) / Math.PI - 90;\n  return [lon, lat];\n}\n\nexport function degrees2Radian(deg: number): number {\n  return (deg * Math.PI) / 180;\n}\n\n// export function degrees2meters2(lon: number, lat: number): [number, number] {\n//   const radius = 6378137.0;\n//   const x = (radius * lon * Math.PI) / 180.0;\n//   const y =\n//     radius * Math.log(Math.tan(Math.PI / 4.0 + (lat * Math.PI) / 360.0));\n//   return [x, y];\n// }\n\n// export function meters2degress2(x: number, y: number): LngLatArray {\n//   const radius = 6378137.0;\n//   const lon = (180 / Math.PI) * (x / radius);\n//   const lat = (360 / Math.PI) * (Math.atan(Math.exp(y / radius)) - Math.PI / 4);\n//   return [lon, lat];\n// }\n\n// const lon = -77.035974;\n// const lat = 38.898717;\n\n// console.log(degrees2meters(lon, lat), degrees2meters2(lon, lat));\n\n// const x = -8575605.398443861;\n// const y = 4707174.018280405;\n\n// console.log(meters2degress(x, y), meters2degress2(x, y));\n","import type { GeoJSON, Geometry, Position } from 'geojson';\n\nexport function coordinatesCount(geojson: GeoJSON): number {\n  let count = 0;\n  eachCoordinates(geojson, () => count++);\n  return count;\n}\n\nexport function getCoordinates(geojson: GeoJSON): Position[] {\n  const coordinates: Position[] = [];\n  eachCoordinates(geojson, (pos) => coordinates.push(pos));\n  return coordinates;\n}\n\nexport function eachCoordinates(\n  geojson: GeoJSON,\n  cb: (position: Position) => void,\n): void {\n  eachGeometry(geojson, (geom) => {\n    if ('coordinates' in geom) {\n      if (geom.type === 'Polygon' || geom.type === 'MultiLineString') {\n        for (const x of geom.coordinates) {\n          x.forEach((y) => cb(y));\n        }\n      } else if (geom.type === 'MultiPolygon') {\n        for (const x of geom.coordinates) {\n          x.forEach((y) => y.forEach((z) => cb(z)));\n        }\n      } else if (geom.type === 'Point') {\n        cb(geom.coordinates);\n      } else if (geom.type === 'MultiPoint' || geom.type === 'LineString') {\n        for (const x of geom.coordinates) {\n          cb(x);\n        }\n      }\n    }\n    return geom;\n  });\n}\n\nexport function getPolygons(geojson: GeoJSON): Position[][] {\n  const polygons: Position[][] = [];\n  eachGeometry(geojson, (geom) => {\n    if ('coordinates' in geom) {\n      if (geom.type === 'Polygon') {\n        geom.coordinates.forEach((x) => polygons.push(x));\n      } else if (geom.type === 'MultiPolygon') {\n        for (const x of geom.coordinates) {\n          for (const y of x) {\n            polygons.push(y);\n          }\n        }\n      }\n    }\n    return geom;\n  });\n  return polygons;\n}\n\nexport function eachGeometry(\n  geojson: GeoJSON,\n  cb: (position: Geometry) => void,\n): void {\n  if (geojson.type === 'FeatureCollection') {\n    for (const f of geojson.features) {\n      cb(f.geometry);\n    }\n  } else if (geojson.type === 'Feature') {\n    cb(geojson.geometry);\n  } else if ('coordinates' in geojson) {\n    cb(geojson);\n  }\n}\n","import type { LatLng, LngLatArray } from './interfaces';\n\nexport function latLngToLngLatArray(latLng: LatLng): LngLatArray {\n  return [latLng.lng, latLng.lat];\n}\n\nexport function lngLatArrayToLatLng(coord: LngLatArray): LatLng {\n  return { lat: coord[1], lng: coord[0] };\n}\n","import type { Feature, Polygon } from 'geojson';\n\nimport type { LngLatBoundsArray } from './interfaces';\n\nexport function getBoundsPolygon(b: LngLatBoundsArray): Polygon {\n  const polygon: Polygon = {\n    type: 'Polygon',\n    coordinates: [getBoundsCoordinates(b)],\n  };\n  return polygon;\n}\n\nexport function getBoundsCoordinates(b: LngLatBoundsArray): number[][] {\n  const westNorth = [b[0], b[1]];\n  const eastNorth = [b[2], b[1]];\n  const eastSouth = [b[2], b[3]];\n  const westSouth = [b[0], b[3]];\n\n  return [westNorth, eastNorth, eastSouth, westSouth, westNorth];\n}\n\nexport function getBoundsFeature(b: LngLatBoundsArray): Feature<Polygon> {\n  const feature: Feature<Polygon> = {\n    type: 'Feature',\n    properties: {},\n    geometry: getBoundsPolygon(b),\n  };\n  return feature;\n}\n","import { EARTHS_RADIUS } from './constants';\n\nimport type { Feature, Polygon, Position } from 'geojson';\n\nconst d2r = Math.PI / 180; // degrees to radians\nconst r2d = 180 / Math.PI; // radians to degrees\n\nexport function getCirclePolygonCoordinates(\n  lng: number,\n  lat: number,\n  /** In kilometers */\n  radius = 10,\n  points = 6,\n): Position[] {\n  // find the radius in lat/lon\n  const rlat = (radius / EARTHS_RADIUS) * r2d;\n  const rlng = rlat / Math.cos(lat * d2r);\n\n  const extp = [];\n  for (let i = 0; i < points + 1; i++) {\n    // one extra here makes sure we connect the\n\n    const theta = Math.PI * (i / (points / 2));\n    const ex = lng + rlng * Math.cos(theta); // center a + radius x * cos(theta)\n    const ey = lat + rlat * Math.sin(theta); // center b + radius y * sin(theta)\n    extp.push([ex, ey]);\n  }\n\n  return extp;\n}\n\nexport function getCircleFeature(\n  lng: number,\n  lat: number,\n  radius = 10,\n  points = 6,\n): Feature<Polygon> {\n  const polygon = getCirclePolygonCoordinates(lng, lat, radius, points);\n  const feature: Feature<Polygon> = {\n    type: 'Feature',\n    properties: {},\n    geometry: {\n      type: 'Polygon',\n      coordinates: [polygon],\n    },\n  };\n  return feature;\n}\n","import type { LngLatArray } from '@nextgis/utils';\n\nexport function getIdentifyRadius(\n  center: LngLatArray,\n  zoom: number,\n  pixelRadius: number,\n): number {\n  pixelRadius = pixelRadius ?? 10;\n  const metresPerPixel =\n    (40075016.686 * Math.abs(Math.cos((center[1] * 180) / Math.PI))) /\n    Math.pow(2, zoom + 8);\n  const radius = pixelRadius * metresPerPixel * 0.0005;\n  return radius;\n}\n","import { EARTHS_RADIUS } from './constants';\n\nimport type { Position } from 'geojson';\n\nconst d2r = Math.PI / 180;\nconst r2d = 180 / Math.PI;\n\nexport function getSquarePolygonCoordinates(\n  lng: number,\n  lat: number,\n  halfSideLength = 10,\n): Position[] {\n  const rlat = (halfSideLength / EARTHS_RADIUS) * r2d;\n  const rlng = rlat / Math.cos(lat * d2r);\n\n  const topLeft: Position = [lng - rlng, lat + rlat];\n  const topRight: Position = [lng + rlng, lat + rlat];\n  const bottomRight: Position = [lng + rlng, lat - rlat];\n  const bottomLeft: Position = [lng - rlng, lat - rlat];\n\n  return [topLeft, topRight, bottomRight, bottomLeft, topLeft];\n}\n","import type { LngLatBoundsArray } from '@nextgis/utils';\n\nexport function isLngLatBoundsArray(\n  array: unknown,\n): array is LngLatBoundsArray {\n  return (\n    Array.isArray(array) &&\n    array.length === 4 &&\n    array.every((x) => typeof x === 'number')\n  );\n}\n","export function round(val: number, toFixed?: number): number {\n  const n = toFixed ? Number('1e+' + toFixed) : 1;\n  return Math.round((val + Number.EPSILON) * n) / n;\n}\n","export function objectAssign<T, U>(target: T, source: U): T & U;\n\n/**\n * Copy the values of all of the enumerable own properties from one or more source objects to a\n * target object. Returns the target object.\n * @param target - The target object to copy to.\n * @param source1 - The first source object from which to copy properties.\n * @param source2 - The second source object from which to copy properties.\n */\nexport function objectAssign<T, U, V>(\n  target: T,\n  source1: U,\n  source2: V,\n): T & U & V;\n\n/**\n * Copy the values of all of the enumerable own properties from one or more source objects to a\n * target object. Returns the target object.\n * @param target - The target object to copy to.\n * @param source1 - The first source object from which to copy properties.\n * @param source2 - The second source object from which to copy properties.\n * @param source3 - The third source object from which to copy properties.\n */\nexport function objectAssign<T, U, V, W>(\n  target: T,\n  source1: U,\n  source2: V,\n  source3: W,\n): T & U & V & W;\n\n/**\n * Copy the values of all of the enumerable own properties from one or more source objects to a\n * target object. Returns the target object.\n * @param target - The target object to copy to.\n * @param sources - One or more source objects from which to copy properties\n */\nexport function objectAssign(\n  target: Record<string, unknown>,\n  ...sources: any[]\n): any {\n  for (const source of sources) {\n    for (const prop of Object.getOwnPropertyNames(source)) {\n      (target as any)[prop] = source[prop];\n    }\n  }\n}\n","function isEqual(a: unknown, b: unknown, o: unknown, p: unknown): boolean {\n  if (a instanceof Array) {\n    if (!(b instanceof Array)) return false;\n    //if (compareObjects(oVal, pVal === false) return false\n    //would work, too, and perhaps is a better fit, still, this is easy, too\n    return b.sort().join('') === a.sort().join('');\n  } else if (a instanceof Date) {\n    if (!(b instanceof Date)) return false;\n    return '' + a === '' + b;\n  } else if (a instanceof Function) {\n    if (!(b instanceof Function)) return false;\n    //ignore functions, or check them regardless?\n  } else if (a instanceof Object) {\n    if (!(b instanceof Object)) return false;\n    if (a === o) {\n      return b === p;\n    } else {\n      return objectDeepEqual(a, b);\n    }\n  }\n  return a === b;\n}\n\n// based on https://stackoverflow.com/a/13143059\nexport function objectDeepEqual<\n  T extends Record<string, any> = Record<string, any>,\n>(o: T, p: T): boolean {\n  const keysO = Object.keys(o).sort();\n  const keysP = Object.keys(p).sort();\n  if (keysO.length !== keysP.length) return false;\n  if (keysO.join('') !== keysP.join('')) return false;\n  for (let i = 0; i < keysO.length; i++) {\n    const oVal = o[keysO[i]];\n    const pVal = p[keysP[i]];\n    if (!isEqual(oVal, pVal, o, p)) {\n      return false;\n    }\n  }\n  return true;\n}\n","type NoUndefinedField<T> = {\n  [P in keyof T]: Exclude<T[P], undefined>;\n};\n\nexport function objectRemoveEmpty<T extends Record<any, any>>(\n  obj: T,\n): NoUndefinedField<T> {\n  const newObj: Record<any, any> = {};\n  Object.keys(obj).forEach((key) => {\n    if (!(obj[key] instanceof Array) && obj[key] === Object(obj[key])) {\n      newObj[key] = objectRemoveEmpty(obj[key]);\n    } else if (obj[key] !== undefined) {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj as NoUndefinedField<T>;\n}\n","export const isBrowser =\n  typeof window !== 'undefined' && typeof window.document !== 'undefined';\n\nexport const type: 'browser' | 'node' = isBrowser ? 'browser' : 'node';\n\nexport function getGlobalVariable(): any {\n  if (isBrowser) {\n    return window;\n  } else {\n    // NativeScript uses global, not window\n    return global;\n  }\n}\n","export function reEscape(s: string): string {\n  return s.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n","export function sleep(delay = 0): Promise<void> {\n  return new Promise<void>((resolve) => setTimeout(resolve, delay));\n}\n","/**\n * Camelize a string, cutting the string by separator character.\n * @param text to camelize\n * @param separator Word separator (string or regexp)\n * @return string Camelized text\n */\nexport function camelize(text: string, separator = /[_.\\- ]/) {\n  // Cut the string into words\n  const words = text.split(separator);\n\n  // Concatenate all capitalized words to get camelized string\n  let result = '';\n  for (let i = 0; i < words.length; i++) {\n    const word = words[i];\n    const capitalizedWord = word.charAt(0).toUpperCase() + word.slice(1);\n    result += capitalizedWord;\n  }\n\n  return result;\n}\n","export function capitalize(str: string): string {\n  str = String(str).toLowerCase();\n  return str[0].toUpperCase() + str.slice(1);\n}\n","export function numberWithSpaces(x: number): string {\n  const parts = x.toString().split('.');\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\n  return parts.join('.');\n}\n","type Obj = Record<string | number, any>;\n\nexport function isObjKey<O extends Obj = Obj>(\n  obj: O,\n  key: unknown,\n): key is keyof O {\n  if (typeof key === 'string' || typeof key === 'number') {\n    return key in obj;\n  }\n  return false;\n}\n\n/**\n *\n * @deprecated - use isObjKey instead\n */\nexport function keyInObj<O extends Obj = Obj>(\n  obj: O,\n  key: unknown,\n): key is keyof O {\n  return isObjKey(obj, key);\n}\n","import { isArray, isObject } from '../index';\n\nexport type AnyJson = boolean | number | string | null | JsonArray | JsonMap;\nexport interface JsonMap {\n  [key: string]: AnyJson;\n}\nexport type JsonArray = Array<AnyJson>;\n\nexport function isAnyJson(val: unknown): val is AnyJson {\n  if (\n    typeof val === 'boolean' ||\n    typeof val === 'number' ||\n    typeof val === 'string' ||\n    val === null\n  ) {\n    return true;\n  } else if (isObject(val)) {\n    return isJsonMap(val);\n  } else if (isArray(val)) {\n    return isJsonArray(val);\n  }\n  return false;\n}\n\nexport function isJsonArray(val: unknown): val is JsonArray {\n  if (isArray(val)) {\n    return val.every(isAnyJson);\n  }\n  return false;\n}\n\nexport function isJsonMap(val: unknown): val is JsonMap {\n  if (isObject(val)) {\n    for (const i in val) {\n      if (!isAnyJson(i)) {\n        return false;\n      }\n    }\n  }\n  return false;\n}\n","export * from './DeepPartial';\nexport * from './isObjKey';\nexport * from './Json';\nexport * from './Type';\n\nexport function isObject(val: unknown): val is Record<string | number, any> {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\nexport function isArray(val: unknown): val is [] {\n  return Object.prototype.toString.call(val) === '[object Array]';\n}\n","export function unflatten(\n  data: Record<string, any> | any[],\n): Record<string, any> {\n  if (Object(data) !== data || Array.isArray(data)) return data;\n  const regex = /\\.?([^.[\\]]+)|\\[(\\d+)\\]/g;\n  const flat: Record<string, any> = {};\n  for (const p in data) {\n    let cur = flat;\n    let prop = '';\n    let m;\n    while ((m = regex.exec(p))) {\n      cur = cur[prop] || (cur[prop] = m[2] ? [] : {});\n      prop = m[2] || m[1];\n    }\n    cur[prop] = data[p];\n  }\n  return flat[''] || flat;\n}\n","export function fixUrlStr(url: string): string {\n  // remove double slash\n  return url.replace(/([^:]\\/)\\/+/g, '$1');\n}\n\nexport function updateUrlParams(\n  urlStr: string,\n  params: Record<string, string | undefined>,\n) {\n  const url = new URL(urlStr);\n  const searchParams = new URLSearchParams(url.search);\n\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === undefined) {\n      searchParams.delete(key);\n    } else {\n      searchParams.set(key, value);\n    }\n  });\n\n  searchParams.set('timestamp', String(new Date().getTime()));\n\n  const newSearch = [...searchParams.entries()]\n    .map(([key, value]) => `${key}=${value}`)\n    .join('&');\n\n  return `${url.origin}${url.pathname}?${newSearch}`;\n}\n"],"names":["applyMixins","derivedCtor","baseCtors","opt","derivedProperties","allProperties","prototype","replace","forEach","baseCtor","Object","getOwnPropertyNames","name","isSomeProp","indexOf","descriptor","getOwnPropertyDescriptor","defineProperty","obj","_props","getPrototypeOf","op","i","length","push","_allProperties","mixinProperties","properties","arrayChunk","arr","size","Array","from","Math","ceil","v","slice","arrayCompare","array1","array2","_arrayCompare","sort","arrayCompareStrict","every","value","index","arrayUnique","filter","elem","pos","Clipboard","constructor","text","__publicField","this","copy","navigator","clipboard","writeText","window","clipboardData","setData","copyToClipboard","silent","console","log","e","input","document","createElement","body","appendChild","copyNodeContentsToClipboard","removeChild","select","setSelectionRange","execCommand","debounce","cb","wait","timeoutId","wrapper","args","clear","setTimeout","apply","clearTimeout","DebounceDecorator","_target","key","configurable","enumerable","get","debugLog","message","deepmerge","target","src","mergeArray","target_","src_","array","isArray","dst","concat","keys","defined","val","full","deprecatedMapClick","ev","lngLat","latLng","lng","lat","deprecatedWarn","warn","Events","emitter","setEventStatus","event","status","_eventsStatus","onLoad","promises","map","x","Promise","res","getEventStatus","once","all","then","flatten","data","_a","flatArray","result","recurse","cur","prop","l","isEmpty","p","checkExtent","extent","minLon","minLat","maxLon","maxLat","isOrderValid","correctedExtent","min","max","join","isValidLon","isValidLat","EARTHS_RADIUS","degrees2meters","y","tan","PI","meters2degrees","atan","exp","degrees2Radian","deg","coordinatesCount","geojson","count","eachCoordinates","getCoordinates","coordinates","eachGeometry","geom","type","z","getPolygons","polygons","f","features","geometry","latLngToLngLatArray","lngLatArrayToLatLng","coord","getBoundsPolygon","b","getBoundsCoordinates","westNorth","getBoundsFeature","d2r","r2d","getCirclePolygonCoordinates","radius","points","rlat","rlng","cos","extp","theta","ex","ey","sin","getCircleFeature","getIdentifyRadius","center","zoom","pixelRadius","abs","pow","getSquarePolygonCoordinates","halfSideLength","topLeft","isLngLatBoundsArray","round","toFixed","n","Number","EPSILON","objectAssign","sources","source","isEqual","a","o","Date","Function","objectDeepEqual","keysO","keysP","objectRemoveEmpty","newObj","isBrowser","getGlobalVariable","global","reEscape","s","sleep","delay","resolve","camelize","separator","words","split","word","charAt","toUpperCase","capitalize","str","String","toLowerCase","numberWithSpaces","parts","toString","isObjKey","keyInObj","isAnyJson","isObject","isJsonMap","isJsonArray","call","unflatten","regex","flat","m","exec","fixUrlStr","url","updateUrlParams","urlStr","params","URL","searchParams","URLSearchParams","search","entries","delete","set","getTime","newSearch","origin","pathname"],"mappings":"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"}